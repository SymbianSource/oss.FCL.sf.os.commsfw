//
// Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
// All rights reserved.
// This component and the accompanying materials are made available
// under the terms of "Eclipse Public License v1.0"
// which accompanies this distribution, and is available
// at the URL "http://www.eclipse.org/legal/epl-v10.html".
//
// Initial Contributors:
// Nokia Corporation - initial contribution.
//
// Contributors:
//
// Description:
//
// CAUTION: This script is *NOT* intended to be invoked directly.  Instead, it is to be called
// by another script that sets up a suitable environment in which to run the test cases.
// This includes:
// - loading a suitable test_esock_ip.ini
// - loading a suitable CommDB configuration
// - starting up / shutting down the ESockSvr

// This script contains the set of test cases that:
// - do not require a connection to a test network
// - do not require a test_esock.ini file.
// - perform memory (OOM, Out of MBuf, Alloc Heaven, etc) testing.

LOAD_SUITE TE_Esock 

// open socket server 
RUN_TEST_STEP 10 TE_Esock OpenServer

PRINT TE_Esock OOM: Section 1


START_TESTCASE			COMINF-ESOCK-OOM-0101
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0101

RUN_TEST_STEP !OOM 20 TE_Esock Test1.1 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0101


START_TESTCASE			COMINF-ESOCK-OOM-0102
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0102

RUN_TEST_STEP !OOM 20 TE_Esock Test1.2 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0102


START_TESTCASE			COMINF-ESOCK-OOM-0103
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0103

RUN_TEST_STEP !OOM 20 TE_Esock Test1.3 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0103


START_TESTCASE			COMINF-ESOCK-OOM-0104
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0104

RUN_TEST_STEP !OOM 20 TE_Esock Test1.4 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0104


START_TESTCASE			COMINF-ESOCK-OOM-0105
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0105

RUN_TEST_STEP !OOM 20 TE_Esock Test1.5 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0105


START_TESTCASE			COMINF-ESOCK-OOM-0106
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0106

RUN_TEST_STEP !OOM 20 TE_Esock Test1.6 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0106


START_TESTCASE			COMINF-ESOCK-OOM-0107
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0107

RUN_TEST_STEP !OOM 20 TE_Esock Test1.7 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0107


START_TESTCASE			COMINF-ESOCK-OOM-0108
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0108

RUN_TEST_STEP !OOM 20 TE_Esock Test1.8 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0108


START_TESTCASE			COMINF-ESOCK-OOM-0109
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0109

RUN_TEST_STEP !OOM 20 TE_Esock Test1.9 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0109


START_TESTCASE			COMINF-ESOCK-OOM-0110
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0110

RUN_TEST_STEP !OOM 20 TE_Esock Test1.10
END_TESTCASE			COMINF-ESOCK-OOM-0110


START_TESTCASE			COMINF-ESOCK-OOM-0111
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0111

RUN_TEST_STEP !OOM 20 TE_Esock Test1.11 z:\testdata\configs\test_esock.ini
END_TESTCASE			COMINF-ESOCK-OOM-0111


START_TESTCASE			COMINF-ESOCK-OOM-0112
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0112

RUN_TEST_STEP !OOM 20 TE_Esock Test1.12
END_TESTCASE			COMINF-ESOCK-OOM-0112


START_TESTCASE			COMINF-ESOCK-OOM-0113
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0113

RUN_TEST_STEP !OOM 20 TE_Esock Test1.13
END_TESTCASE			COMINF-ESOCK-OOM-0113


START_TESTCASE			COMINF-ESOCK-OOM-0114
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0114

RUN_TEST_STEP !OOM 20 TE_Esock Test1.14
END_TESTCASE			COMINF-ESOCK-OOM-0114


START_TESTCASE			COMINF-ESOCK-OOM-0115
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0115

RUN_TEST_STEP 10 TE_Esock Test1.1 z:\testdata\configs\test_esock.ini
RUN_TEST_STEP !OOM 20 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0115


START_TESTCASE			COMINF-ESOCK-OOM-0116
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0116

RUN_TEST_STEP !OOM 20 TE_Esock Test1.16
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0116


START_TESTCASE			COMINF-ESOCK-OOM-0117
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0117

RUN_TEST_STEP !OOM 20 TE_Esock Test1.17
RUN_TEST_STEP 10 TE_Esock Test1.15
END_TESTCASE			COMINF-ESOCK-OOM-0117


PRINT TE_Esock OOM: Section 7


START_TESTCASE			COMINF-ESOCK-OOM-0701
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0701

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.1
END_TESTCASE			COMINF-ESOCK-OOM-0701


START_TESTCASE			COMINF-ESOCK-OOM-0702
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0702

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.2
END_TESTCASE			COMINF-ESOCK-OOM-0702


START_TESTCASE			COMINF-ESOCK-OOM-0703
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0703

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.3
END_TESTCASE			COMINF-ESOCK-OOM-0703


START_TESTCASE			COMINF-ESOCK-OOM-0704
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0704

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.4
END_TESTCASE			COMINF-ESOCK-OOM-0704


START_TESTCASE			COMINF-ESOCK-OOM-0705
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0705

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.5
END_TESTCASE			COMINF-ESOCK-OOM-0705


START_TESTCASE			COMINF-ESOCK-OOM-0706
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0706

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.6
END_TESTCASE			COMINF-ESOCK-OOM-0706


START_TESTCASE			COMINF-ESOCK-OOM-0707
//! @SYMTestCaseID		COMINF-ESOCK-OOM-0707

RUN_TEST_STEP !OOM 20 TE_Esock  Test7.7
END_TESTCASE			COMINF-ESOCK-OOM-0707


PRINT TE_Esock OOM: Section 25

// copy hosts file
RUN_UTILS MkDir c:\private\
RUN_UTILS MkDir c:\private\10000882\
RUN_UTILS MkDir c:\system
RUN_UTILS MkDir c:\system\data
RUN_UTILS CopyFile z:\testdata\configs\hosts.te_esock c:\private\10000882\hosts
RUN_UTILS MakeReadWrite c:\private\10000882\hosts
RUN_UTILS CopyFile c:\private\10000882\hosts c:\system\data\hosts


START_TESTCASE			COMINF-ESOCK-OOM-2501
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2501

RUN_TEST_STEP !OOM 60 TE_Esock  Test25.1
END_TESTCASE			COMINF-ESOCK-OOM-2501


START_TESTCASE			COMINF-ESOCK-OOM-2502
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2502

RUN_TEST_STEP !OOM 20 TE_Esock Test25.2
END_TESTCASE			COMINF-ESOCK-OOM-2502


START_TESTCASE			COMINF-ESOCK-OOM-2503
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2503

RUN_TEST_STEP !OOM 20 TE_Esock  Test25.3 z:\testdata\configs\test_esock.ini
END_TESTCASE			COMINF-ESOCK-OOM-2503


START_TESTCASE			COMINF-ESOCK-OOM-2504
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2504

RUN_TEST_STEP !OOM 30 TE_Esock  Test25.4
END_TESTCASE			COMINF-ESOCK-OOM-2504


// Test 25.5 moved to TE_ESock_tests-mem-nonet.script

// delete hosts file
RUN_UTILS delete c:\private\10000882\hosts


PRINT TE_Esock OOM: Section 26


START_TESTCASE			COMINF-ESOCK-OOM-2601
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2601

// run test 26.1 Test Query of 'A' type.
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.1
END_TESTCASE			COMINF-ESOCK-OOM-2601


START_TESTCASE			COMINF-ESOCK-OOM-2602
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2602

// run test 26.2 Test Query of 'SVR' type.
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.2
END_TESTCASE			COMINF-ESOCK-OOM-2602


START_TESTCASE			COMINF-ESOCK-OOM-2603
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2603

// run test 26.3 Test Query of 'PTR' type.
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.3
END_TESTCASE			COMINF-ESOCK-OOM-2603


START_TESTCASE			COMINF-ESOCK-OOM-2604
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2604

// run test 26.4 Test Query of 'NAPTR' type.
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.4
END_TESTCASE			COMINF-ESOCK-OOM-2604


START_TESTCASE			COMINF-ESOCK-OOM-2605
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2605

// run test 26.5 Test Query of 'MX' type.
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.5
END_TESTCASE			COMINF-ESOCK-OOM-2605


START_TESTCASE			COMINF-ESOCK-OOM-2606
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2606

// run test 26.6 Test Query of 'AAAA' type.
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.6
END_TESTCASE			COMINF-ESOCK-OOM-2606


START_TESTCASE			COMINF-ESOCK-OOM-2607
//! @SYMTestCaseID		COMINF-ESOCK-OOM-2607

// run test 26.7 Test ESock server memory allocation
RUN_TEST_STEP !OOM 20 TE_Esock  Test26.7
END_TESTCASE			COMINF-ESOCK-OOM-2607

// close socket server
RUN_TEST_STEP 10 TE_Esock  CloseServer
